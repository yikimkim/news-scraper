<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹¤ì œ í´ë¦­ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px;
            background: #f0f0f0;
        }
        .test-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 800px;
            margin: 0 auto;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .status {
            background: #e3f2fd;
            border: 2px solid #2196F3;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .test-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 1rem;
        }
        .test-btn:hover {
            background: #1976D2;
        }
        .main-frame {
            width: 100%;
            height: 70vh;
            border: 3px solid #2196F3;
            border-radius: 8px;
            margin: 20px 0;
        }
        .log-area {
            background: #f5f5f5;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª ì‹¤ì œ ì‚¬ìš©ì í´ë¦­ í…ŒìŠ¤íŠ¸</h1>
        
        <div class="status">
            <h3>ğŸ¯ í…ŒìŠ¤íŠ¸ ëª©ì </h3>
            <p>ì‹¤ì œ ì‚¬ìš©ìê°€ íƒ­ì„ í´ë¦­í–ˆì„ ë•Œ ì •í™•íˆ ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>
            <p><strong>ë¬¸ì œ:</strong> "ë‚´ ê²Œì‹œíŒ", "ì •ë¶€ ë³´ë„ìë£Œ" íƒ­ì´ ì‘ë™í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì‚¬ìš©ì ë³´ê³ </p>
        </div>

        <h3>ğŸ“‹ í…ŒìŠ¤íŠ¸ ì ˆì°¨</h3>
        <p>1. ì•„ë˜ iframeì—ì„œ ì§ì ‘ íƒ­ë“¤ì„ í´ë¦­í•´ë³´ì„¸ìš”</p>
        <p>2. ê° íƒ­ì´ ì •ìƒì ìœ¼ë¡œ ì „í™˜ë˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”</p>
        <p>3. íŠ¹íˆ "ğŸ“‚ ë‚´ ê²Œì‹œíŒ"ê³¼ "ğŸ›ï¸ ì •ë¶€ ë³´ë„ìë£Œ" íƒ­ì„ ì¤‘ì  í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”</p>

        <button class="test-btn" onclick="testIframeAccess()">iframe ì ‘ê·¼ í…ŒìŠ¤íŠ¸</button>
        <button class="test-btn" onclick="forceTabSwitch('boards')">ê°•ì œë¡œ ë‚´ ê²Œì‹œíŒ ì „í™˜</button>
        <button class="test-btn" onclick="forceTabSwitch('government')">ê°•ì œë¡œ ì •ë¶€ ë³´ë„ìë£Œ ì „í™˜</button>
        <button class="test-btn" onclick="checkTabStates()">í˜„ì¬ íƒ­ ìƒíƒœ í™•ì¸</button>

        <div class="log-area" id="testLog">í…ŒìŠ¤íŠ¸ ë¡œê·¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...\n</div>

        <h3>ğŸŒ ì‹¤ì œ ë©”ì¸ ì‚¬ì´íŠ¸ (ì§ì ‘ í´ë¦­ í…ŒìŠ¤íŠ¸)</h3>
        <iframe class="main-frame" src="https://3000-i0i3m0ak4ew6ttwalvn3w-c81df28e.sandbox.novita.ai" id="mainSite"></iframe>

        <div class="status">
            <h3>âš ï¸ í…ŒìŠ¤íŠ¸ ì‹œ ì£¼ì˜ì‚¬í•­</h3>
            <p>â€¢ iframe ë‚´ë¶€ì˜ íƒ­ ë²„íŠ¼ì„ <strong>ì§ì ‘ ë§ˆìš°ìŠ¤ë¡œ í´ë¦­</strong>í•´ë³´ì„¸ìš”</p>
            <p>â€¢ íƒ­ ì „í™˜ ì‹œ ìš°ìƒë‹¨ì— ì•Œë¦¼ì´ ë‚˜íƒ€ë‚˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”</p>
            <p>â€¢ ì½˜í…ì¸ ê°€ ì‹¤ì œë¡œ ë°”ë€ŒëŠ”ì§€ ëˆˆìœ¼ë¡œ í™•ì¸í•˜ì„¸ìš”</p>
            <p>â€¢ ë¬¸ì œê°€ ìˆìœ¼ë©´ ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬(F12) ì½˜ì†”ì„ í™•ì¸í•´ë³´ì„¸ìš”</p>
        </div>
    </div>

    <script>
        function log(message) {
            const logArea = document.getElementById('testLog');
            const timestamp = new Date().toLocaleTimeString();
            logArea.textContent += `[${timestamp}] ${message}\n`;
            logArea.scrollTop = logArea.scrollHeight;
        }

        function testIframeAccess() {
            log('ğŸ” iframe ì ‘ê·¼ í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            
            const iframe = document.getElementById('mainSite');
            
            try {
                if (iframe.contentWindow) {
                    log('âœ… iframe.contentWindow ì ‘ê·¼ ì„±ê³µ');
                    
                    if (iframe.contentWindow.switchTab) {
                        log('âœ… switchTab í•¨ìˆ˜ ë°œê²¬ë¨');
                    } else {
                        log('âŒ switchTab í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
                    }
                    
                    const tabs = iframe.contentWindow.document.querySelectorAll('.nav-tab');
                    log(`ğŸ“‹ íƒ­ ë²„íŠ¼ ê°œìˆ˜: ${tabs.length}`);
                    
                    const tabContents = iframe.contentWindow.document.querySelectorAll('.tab-content');
                    log(`ğŸ“„ íƒ­ ì½˜í…ì¸  ê°œìˆ˜: ${tabContents.length}`);
                    
                } else {
                    log('âŒ iframe ì ‘ê·¼ ì‹¤íŒ¨ - CORS ì œí•œ ê°€ëŠ¥ì„±');
                }
            } catch (error) {
                log(`âŒ ì˜¤ë¥˜ ë°œìƒ: ${error.message}`);
                log('ğŸ’¡ CORS ì •ì±…ìœ¼ë¡œ ì¸í•´ iframe ë‚´ë¶€ ì ‘ê·¼ì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                log('ğŸ’¡ ì§ì ‘ iframe ë‚´ë¶€ì˜ íƒ­ì„ ë§ˆìš°ìŠ¤ë¡œ í´ë¦­í•´ì„œ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”.');
            }
        }

        function forceTabSwitch(tabName) {
            log(`ğŸ”„ ê°•ì œ íƒ­ ì „í™˜ ì‹œë„: ${tabName}`);
            
            const iframe = document.getElementById('mainSite');
            
            try {
                if (iframe.contentWindow && iframe.contentWindow.switchTab) {
                    iframe.contentWindow.switchTab(tabName);
                    log(`âœ… switchTab('${tabName}') í˜¸ì¶œ ì™„ë£Œ`);
                    
                    setTimeout(() => {
                        const activeTab = iframe.contentWindow.document.querySelector('.tab-content.active');
                        if (activeTab && activeTab.id === `${tabName}-tab`) {
                            log(`âœ… íƒ­ ì „í™˜ ì„±ê³µ: ${activeTab.id} í™œì„±í™”ë¨`);
                        } else {
                            log(`âŒ íƒ­ ì „í™˜ ì‹¤íŒ¨: ${tabName}-tabì´ í™œì„±í™”ë˜ì§€ ì•ŠìŒ`);
                            log(`   í˜„ì¬ í™œì„± íƒ­: ${activeTab ? activeTab.id : 'none'}`);
                        }
                    }, 500);
                    
                } else {
                    log('âŒ switchTab í•¨ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŒ');
                    log('ğŸ’¡ iframe ë‚´ë¶€ë¥¼ ì§ì ‘ í´ë¦­í•´ì„œ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”');
                }
            } catch (error) {
                log(`âŒ ê°•ì œ ì „í™˜ ì‹¤íŒ¨: ${error.message}`);
            }
        }

        function checkTabStates() {
            log('ğŸ“Š í˜„ì¬ íƒ­ ìƒíƒœ í™•ì¸ ì¤‘...');
            
            const iframe = document.getElementById('mainSite');
            
            try {
                if (iframe.contentWindow && iframe.contentWindow.document) {
                    const activeButton = iframe.contentWindow.document.querySelector('.nav-tab.active');
                    const activeContent = iframe.contentWindow.document.querySelector('.tab-content.active');
                    
                    log(`ğŸ¯ í™œì„± ë²„íŠ¼: ${activeButton ? activeButton.textContent.trim() : 'none'}`);
                    log(`ğŸ“„ í™œì„± ì½˜í…ì¸ : ${activeContent ? activeContent.id : 'none'}`);
                    
                    const allButtons = iframe.contentWindow.document.querySelectorAll('.nav-tab');
                    const allContents = iframe.contentWindow.document.querySelectorAll('.tab-content');
                    
                    log(`ğŸ“‹ ì „ì²´ ë²„íŠ¼ ìˆ˜: ${allButtons.length}`);
                    log(`ğŸ“„ ì „ì²´ ì½˜í…ì¸  ìˆ˜: ${allContents.length}`);
                    
                    allContents.forEach(content => {
                        const style = iframe.contentWindow.getComputedStyle(content);
                        log(`   ${content.id}: display=${style.display}, visibility=${style.visibility}`);
                    });
                    
                } else {
                    log('âŒ iframe ë¬¸ì„œì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŒ');
                }
            } catch (error) {
                log(`âŒ ìƒíƒœ í™•ì¸ ì‹¤íŒ¨: ${error.message}`);
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ìœ¼ë¡œ ì ‘ê·¼ í…ŒìŠ¤íŠ¸
        setTimeout(() => {
            log('ğŸš€ ìë™ ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸ ì‹œì‘');
            testIframeAccess();
        }, 3000);
    </script>
</body>
</html>