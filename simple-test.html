<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>간단한 탭 테스트</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-area { background: #f8f9fa; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .test-button { padding: 15px 25px; margin: 10px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .console-output { background: #000; color: #0f0; padding: 15px; font-family: monospace; white-space: pre-wrap; max-height: 300px; overflow-y: auto; }
    </style>
</head>
<body>
    <h1>🧪 간단한 탭 테스트</h1>
    
    <div class="test-area">
        <h3>메인 사이트에서 실행할 코드</h3>
        <p>메인 사이트에서 F12를 눌러 Console에 다음 코드를 붙여넣기 하세요:</p>
        
        <button class="test-button" onclick="copyToClipboard()">📋 테스트 코드 복사</button>
        <button class="test-button" onclick="openMainSite()">🌐 메인 사이트 열기</button>
        
        <div class="console-output" id="test-code">
// 🧪 탭 전환 문제 진단 스크립트
console.log('=== 탭 전환 진단 시작 ===');

// 1. 기본 환경 확인
console.log('1. 현재 URL:', window.location.href);
console.log('2. switchTab 함수 존재:', typeof switchTab);

// 2. DOM 요소 확인
const boardsBtn = document.querySelector('[onclick*="boards"]');
const govBtn = document.querySelector('[onclick*="government"]');
const boardsContent = document.getElementById('boards-tab');
const govContent = document.getElementById('government-tab');

console.log('3. DOM 요소 확인:');
console.log('   - 내 게시판 버튼:', !!boardsBtn);
console.log('   - 정부 보도자료 버튼:', !!govBtn);
console.log('   - boards-tab 컨텐츠:', !!boardsContent);
console.log('   - government-tab 컨텐츠:', !!govContent);

// 3. 실제 클릭 테스트
if (typeof switchTab === 'function') {
    console.log('4. switchTab 함수로 직접 호출 테스트:');
    
    try {
        console.log('   → 내 게시판으로 전환 시도...');
        switchTab('boards');
        
        setTimeout(() => {
            const isActive = document.getElementById('boards-tab')?.classList.contains('active');
            console.log('   → 결과: 내 게시판 활성화', isActive ? '성공' : '실패');
            
            if (isActive) {
                console.log('   ✅ 내 게시판 전환 성공!');
            } else {
                console.log('   ❌ 내 게시판 전환 실패');
                console.log('   현재 활성 탭:', document.querySelector('.tab-content.active')?.id);
            }
            
            // 정부 보도자료도 테스트
            console.log('   → 정부 보도자료로 전환 시도...');
            switchTab('government');
            
            setTimeout(() => {
                const govActive = document.getElementById('government-tab')?.classList.contains('active');
                console.log('   → 결과: 정부 보도자료 활성화', govActive ? '성공' : '실패');
                
                if (govActive) {
                    console.log('   ✅ 정부 보도자료 전환 성공!');
                } else {
                    console.log('   ❌ 정부 보도자료 전환 실패');
                }
                
                console.log('=== 진단 완료 ===');
            }, 1000);
            
        }, 1000);
        
    } catch (error) {
        console.error('   ❌ switchTab 함수 호출 오류:', error);
    }
} else {
    console.error('4. ❌ switchTab 함수가 정의되지 않았습니다!');
    console.log('   window 객체 함수들:', Object.getOwnPropertyNames(window).filter(n => typeof window[n] === 'function').slice(0, 10));
}

// 5. 실제 버튼 클릭도 테스트
if (boardsBtn) {
    console.log('5. 실제 버튼 클릭 테스트 (3초 후):');
    setTimeout(() => {
        try {
            console.log('   → 내 게시판 버튼 클릭...');
            boardsBtn.click();
            console.log('   → 클릭 완료');
        } catch (error) {
            console.error('   ❌ 버튼 클릭 오류:', error);
        }
    }, 3000);
}
        </div>
    </div>

    <div class="test-area">
        <h3>예상 결과</h3>
        <ul>
            <li><strong>성공 시:</strong> "내 게시판 활성화 성공", "정부 보도자료 활성화 성공" 메시지</li>
            <li><strong>함수 없음:</strong> "switchTab 함수가 정의되지 않았습니다" 메시지</li>
            <li><strong>DOM 문제:</strong> 버튼이나 컨텐츠 요소가 false로 나타남</li>
        </ul>
    </div>

    <script>
        function copyToClipboard() {
            const code = document.getElementById('test-code').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('✅ 테스트 코드가 클립보드에 복사되었습니다!\n\n메인 사이트에서 F12 → Console에 붙여넣기 하세요.');
            }).catch(() => {
                alert('복사 실패. 수동으로 코드를 선택해서 복사하세요.');
            });
        }

        function openMainSite() {
            window.open('/', '_blank');
        }
    </script>
</body>
</html>