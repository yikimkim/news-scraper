<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íƒ­ í´ë¦­ ë””ë²„ê·¸</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .debug-section { background: #f8f9fa; padding: 20px; margin: 20px 0; border-radius: 8px; border: 1px solid #dee2e6; }
        .test-button { padding: 15px 25px; margin: 10px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; }
        .test-button:hover { background: #0056b3; }
        .result { padding: 15px; margin: 10px 0; border-radius: 5px; font-family: monospace; white-space: pre-wrap; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .info { background: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; }
        .warning { background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; }
    </style>
</head>
<body>
    <h1>ğŸ” íƒ­ í´ë¦­ ë¬¸ì œ ì‹¤ì‹œê°„ ë””ë²„ê·¸</h1>
    
    <div class="debug-section">
        <h3>1. ë©”ì¸ ì‚¬ì´íŠ¸ ìƒíƒœ í™•ì¸</h3>
        <button class="test-button" onclick="checkMainSite()">ë©”ì¸ ì‚¬ì´íŠ¸ ìƒíƒœ ì ê²€</button>
        <div class="result info" id="main-status">í´ë¦­í•˜ì—¬ í™•ì¸...</div>
    </div>

    <div class="debug-section">
        <h3>2. JavaScript í•¨ìˆ˜ ì¡´ì¬ ì—¬ë¶€ í™•ì¸</h3>
        <button class="test-button" onclick="checkJSFunctions()">í•¨ìˆ˜ ì •ì˜ ìƒíƒœ í™•ì¸</button>
        <div class="result info" id="js-status">í´ë¦­í•˜ì—¬ í™•ì¸...</div>
    </div>

    <div class="debug-section">
        <h3>3. ì‹¤ì œ íƒ­ í´ë¦­ ì‹œë®¬ë ˆì´ì…˜</h3>
        <button class="test-button" onclick="simulateTabClicks()">íƒ­ í´ë¦­ ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰</button>
        <div class="result info" id="click-status">í´ë¦­í•˜ì—¬ í™•ì¸...</div>
    </div>

    <div class="debug-section">
        <h3>4. DOM ìš”ì†Œ í™•ì¸</h3>
        <button class="test-button" onclick="checkDOMElements()">DOM êµ¬ì¡° í™•ì¸</button>
        <div class="result info" id="dom-status">í´ë¦­í•˜ì—¬ í™•ì¸...</div>
    </div>

    <div class="debug-section">
        <h3>5. ì‹¤ì‹œê°„ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸</h3>
        <button class="test-button" onclick="openTestBrowser()">ìƒˆ ì°½ì—ì„œ ì§ì ‘ í…ŒìŠ¤íŠ¸</button>
        <div class="result warning" id="browser-test">
            ìƒˆ ì°½ì´ ì—´ë¦¬ë©´ ë‹¤ìŒì„ ì‹œë„í•˜ì„¸ìš”:
            1. F12ë¥¼ ëˆŒëŸ¬ ê°œë°œì ë„êµ¬ ì—´ê¸°
            2. Consoleì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ ì‹¤í–‰:
               switchTab('boards')
               switchTab('government')
        </div>
    </div>

    <script>
        const mainUrl = window.location.origin + '/';

        async function checkMainSite() {
            const result = document.getElementById('main-status');
            result.textContent = 'ë©”ì¸ ì‚¬ì´íŠ¸ í™•ì¸ ì¤‘...';
            
            try {
                // ë©”ì¸ ì‚¬ì´íŠ¸ HTML ê°€ì ¸ì˜¤ê¸°
                const response = await fetch(mainUrl);
                const html = await response.text();
                
                // ì£¼ìš” ìš”ì†Œë“¤ í™•ì¸
                const hasNavTabs = html.includes('class="nav-tabs"');
                const hasBoardsButton = html.includes('onclick="switchTab(\'boards\')"');
                const hasGovernmentButton = html.includes('onclick="switchTab(\'government\')"');
                const hasBoardsContent = html.includes('id="boards-tab"');
                const hasGovernmentContent = html.includes('id="government-tab"');
                const hasSwitchTabFunction = html.includes('async function switchTab(');
                
                result.className = 'result ' + (hasNavTabs && hasBoardsButton && hasGovernmentButton ? 'success' : 'error');
                result.textContent = `ë©”ì¸ ì‚¬ì´íŠ¸ ìƒíƒœ (${response.status}):
âœ… ì‘ë‹µ ìƒíƒœ: ${response.status} OK
${hasNavTabs ? 'âœ…' : 'âŒ'} nav-tabs í´ë˜ìŠ¤ ì¡´ì¬
${hasBoardsButton ? 'âœ…' : 'âŒ'} ë‚´ ê²Œì‹œíŒ ë²„íŠ¼ onclick ì†ì„±
${hasGovernmentButton ? 'âœ…' : 'âŒ'} ì •ë¶€ ë³´ë„ìë£Œ ë²„íŠ¼ onclick ì†ì„±
${hasBoardsContent ? 'âœ…' : 'âŒ'} boards-tab ì»¨í…ì¸  ì˜ì—­
${hasGovernmentContent ? 'âœ…' : 'âŒ'} government-tab ì»¨í…ì¸  ì˜ì—­
${hasSwitchTabFunction ? 'âœ…' : 'âŒ'} switchTab í•¨ìˆ˜ ì •ì˜

HTML í¬ê¸°: ${(html.length / 1024).toFixed(1)}KB`;

            } catch (error) {
                result.className = 'result error';
                result.textContent = `âŒ ë©”ì¸ ì‚¬ì´íŠ¸ í™•ì¸ ì‹¤íŒ¨: ${error.message}`;
            }
        }

        async function checkJSFunctions() {
            const result = document.getElementById('js-status');
            result.textContent = 'JavaScript í•¨ìˆ˜ í™•ì¸ ì¤‘...';
            
            try {
                const response = await fetch(mainUrl);
                const html = await response.text();
                
                // switchTab í•¨ìˆ˜ ìœ„ì¹˜ í™•ì¸
                const switchTabMatch = html.match(/async function switchTab\([\s\S]*?(?=\n\s*(?:function|async function|const|let|var|\/\/|$))/);
                const isInGlobalScope = switchTabMatch && !html.substring(0, html.indexOf(switchTabMatch[0])).includes('addEventListener');
                
                // ë‹¤ë¥¸ ì£¼ìš” í•¨ìˆ˜ë“¤ í™•ì¸
                const hasUpdateKeywordLists = html.includes('function updateAllKeywordLists');
                const hasInitGovernmentTab = html.includes('function initGovernmentTab');
                const hasDisplayGovernmentNews = html.includes('function displayGovernmentNews');
                
                result.className = 'result ' + (isInGlobalScope ? 'success' : 'error');
                result.textContent = `JavaScript í•¨ìˆ˜ ìƒíƒœ:
${switchTabMatch ? 'âœ…' : 'âŒ'} switchTab í•¨ìˆ˜ ì¡´ì¬
${isInGlobalScope ? 'âœ…' : 'âŒ'} switchTab í•¨ìˆ˜ê°€ ì „ì—­ ìŠ¤ì½”í”„ì— ì •ì˜
${hasUpdateKeywordLists ? 'âœ…' : 'âŒ'} updateAllKeywordLists í•¨ìˆ˜ ì¡´ì¬
${hasInitGovernmentTab ? 'âœ…' : 'âŒ'} initGovernmentTab í•¨ìˆ˜ ì¡´ì¬
${hasDisplayGovernmentNews ? 'âœ…' : 'âŒ'} displayGovernmentNews í•¨ìˆ˜ ì¡´ì¬

switchTab í•¨ìˆ˜ ê¸¸ì´: ${switchTabMatch ? switchTabMatch[0].length : 0}ì`;

            } catch (error) {
                result.className = 'result error';
                result.textContent = `âŒ í•¨ìˆ˜ í™•ì¸ ì‹¤íŒ¨: ${error.message}`;
            }
        }

        async function simulateTabClicks() {
            const result = document.getElementById('click-status');
            result.textContent = 'íƒ­ í´ë¦­ ì‹œë®¬ë ˆì´ì…˜ ì¤‘...';
            
            try {
                // iframeì„ ì‚¬ìš©í•´ì„œ ì‹¤ì œ íƒ­ í´ë¦­ í…ŒìŠ¤íŠ¸
                const iframe = document.createElement('iframe');
                iframe.src = mainUrl;
                iframe.style.width = '100%';
                iframe.style.height = '400px';
                iframe.style.border = '1px solid #ccc';
                
                result.parentNode.appendChild(iframe);
                
                iframe.onload = () => {
                    try {
                        const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                        const iframeWindow = iframe.contentWindow;
                        
                        // switchTab í•¨ìˆ˜ ì¡´ì¬ í™•ì¸
                        const switchTabExists = typeof iframeWindow.switchTab === 'function';
                        
                        result.className = 'result ' + (switchTabExists ? 'success' : 'error');
                        result.textContent = `iframe í…ŒìŠ¤íŠ¸ ê²°ê³¼:
${switchTabExists ? 'âœ…' : 'âŒ'} switchTab í•¨ìˆ˜ ì ‘ê·¼ ê°€ëŠ¥
                        
iframe ë¡œë“œ ì™„ë£Œ. ì•„ë˜ iframeì—ì„œ ì§ì ‘ íƒ­ì„ í´ë¦­í•´ë³´ì„¸ìš”!`;

                        if (switchTabExists) {
                            // ìë™ìœ¼ë¡œ íƒ­ í´ë¦­ í…ŒìŠ¤íŠ¸
                            setTimeout(() => {
                                try {
                                    console.log('iframeì—ì„œ boards íƒ­ í´ë¦­ í…ŒìŠ¤íŠ¸');
                                    iframeWindow.switchTab('boards');
                                    
                                    setTimeout(() => {
                                        console.log('iframeì—ì„œ government íƒ­ í´ë¦­ í…ŒìŠ¤íŠ¸');
                                        iframeWindow.switchTab('government');
                                        
                                        result.textContent += '\n\nâœ… ìë™ íƒ­ í´ë¦­ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!';
                                    }, 2000);
                                } catch (e) {
                                    result.textContent += `\nâŒ ìë™ í´ë¦­ ì˜¤ë¥˜: ${e.message}`;
                                }
                            }, 3000);
                        }
                        
                    } catch (error) {
                        result.className = 'result error';
                        result.textContent = `âŒ iframe ì ‘ê·¼ ì˜¤ë¥˜: ${error.message}`;
                    }
                };
                
            } catch (error) {
                result.className = 'result error';
                result.textContent = `âŒ ì‹œë®¬ë ˆì´ì…˜ ì‹¤íŒ¨: ${error.message}`;
            }
        }

        async function checkDOMElements() {
            const result = document.getElementById('dom-status');
            result.textContent = 'DOM ìš”ì†Œ í™•ì¸ ì¤‘...';
            
            try {
                const response = await fetch(mainUrl);
                const html = await response.text();
                
                // íƒ­ ë²„íŠ¼ë“¤ì˜ onclick ì†ì„± ì •í™•í•œ ë‚´ìš© í™•ì¸
                const boardsButtonMatch = html.match(/onclick="switchTab\('boards'\)"[^>]*>([^<]*)</);
                const govButtonMatch = html.match(/onclick="switchTab\('government'\)"[^>]*>([^<]*)</);
                
                // íƒ­ ì»¨í…ì¸ ë“¤ì˜ ID í™•ì¸
                const boardsContentMatch = html.match(/id="boards-tab"[^>]*class="[^"]*tab-content[^"]*"/);
                const govContentMatch = html.match(/id="government-tab"[^>]*class="[^"]*tab-content[^"]*"/);
                
                result.className = 'result success';
                result.textContent = `DOM êµ¬ì¡° ë¶„ì„:

íƒ­ ë²„íŠ¼ë“¤:
${boardsButtonMatch ? 'âœ…' : 'âŒ'} ë‚´ ê²Œì‹œíŒ ë²„íŠ¼: ${boardsButtonMatch ? boardsButtonMatch[1] : 'ì—†ìŒ'}
${govButtonMatch ? 'âœ…' : 'âŒ'} ì •ë¶€ ë³´ë„ìë£Œ ë²„íŠ¼: ${govButtonMatch ? govButtonMatch[1] : 'ì—†ìŒ'}

íƒ­ ì»¨í…ì¸ ë“¤:
${boardsContentMatch ? 'âœ…' : 'âŒ'} boards-tab ì»¨í…ì¸  ì˜ì—­
${govContentMatch ? 'âœ…' : 'âŒ'} government-tab ì»¨í…ì¸  ì˜ì—­

CSS í´ë˜ìŠ¤:
- tab-content ê¸°ë³¸ ìŠ¤íƒ€ì¼: display: none !important
- tab-content.active í™œì„± ìŠ¤íƒ€ì¼: display: block !important`;

            } catch (error) {
                result.className = 'result error';
                result.textContent = `âŒ DOM í™•ì¸ ì‹¤íŒ¨: ${error.message}`;
            }
        }

        function openTestBrowser() {
            const result = document.getElementById('browser-test');
            
            const testWindow = window.open(mainUrl, '_blank', 'width=1200,height=800');
            
            if (testWindow) {
                result.className = 'result success';
                result.textContent = `âœ… ìƒˆ ì°½ì´ ì—´ë ¸ìŠµë‹ˆë‹¤!

ì‹¤ì œ í…ŒìŠ¤íŠ¸ ë°©ë²•:
1. ìƒˆ ì°½ì—ì„œ F12ë¥¼ ëˆŒëŸ¬ ê°œë°œì ë„êµ¬ë¥¼ ì—½ë‹ˆë‹¤
2. Console íƒ­ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤
3. ë‹¤ìŒ ëª…ë ¹ì–´ë“¤ì„ í•˜ë‚˜ì”© ì…ë ¥í•´ë³´ì„¸ìš”:

   switchTab('boards')
   â†’ ë‚´ ê²Œì‹œíŒìœ¼ë¡œ ì „í™˜ë˜ì–´ì•¼ í•¨

   switchTab('government')  
   â†’ ì •ë¶€ ë³´ë„ìë£Œë¡œ ì „í™˜ë˜ì–´ì•¼ í•¨

4. ì‹¤ì œ íƒ­ ë²„íŠ¼ë„ í´ë¦­í•´ë³´ì„¸ìš”:
   - ğŸ“‚ ë‚´ ê²Œì‹œíŒ
   - ğŸ›ï¸ ì •ë¶€ ë³´ë„ìë£Œ

ë§Œì•½ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤ë©´:
- "switchTab is not defined" â†’ í•¨ìˆ˜ê°€ ì „ì—­ ìŠ¤ì½”í”„ì— ì—†ìŒ
- "Cannot read properties" â†’ DOM ìš”ì†Œê°€ ì—†ìŒ
- ì•„ë¬´ ë°˜ì‘ ì—†ìŒ â†’ CSS ë¬¸ì œ ë˜ëŠ” ì´ë²¤íŠ¸ ë¬¸ì œ`;
            } else {
                result.className = 'result error';
                result.textContent = 'âŒ íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ íŒì—…ì„ í—ˆìš©í•˜ê±°ë‚˜ ì§ì ‘ ë©”ì¸ ì‚¬ì´íŠ¸ë¡œ ì´ë™í•˜ì„¸ìš”.';
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì²´í¬
        window.addEventListener('load', () => {
            setTimeout(checkMainSite, 1000);
        });
    </script>
</body>
</html>