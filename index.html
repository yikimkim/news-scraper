<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>뉴스 스크래퍼 - 스마트 키워드 검색</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="alternate icon" href="/favicon.ico">
    <meta name="description" content="정부 보도자료를 실시간으로 수집하고 관리하는 스마트 뉴스 스크래퍼">
    <meta name="keywords" content="뉴스스크래퍼, 정부보도자료, 뉴스수집, 자동화">
    <meta name="author" content="News Scraper Team">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #2196F3, #21CBF3);
            color: white;
            text-align: center;
            padding: 40px 20px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* 네비게이션 탭 */
        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e0e0e0;
        }

        .nav-tab {
            flex: 1;
            text-align: center;
            padding: 15px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
        }

        .nav-tab.active {
            background: white;
            color: #2196F3;
            border-bottom: 3px solid #2196F3;
        }

        .nav-tab:hover {
            background: #e3f2fd;
            color: #2196F3;
        }

        /* 탭 컨텐츠 */
        .tab-content {
            display: none !important;
            padding: 40px;
        }

        .tab-content.active {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            position: relative !important;
            z-index: 1 !important;
        }

        /* 고정 키워드 섹션 */
        .fixed-keywords-section {
            margin-bottom: 40px;
        }

        .fixed-keywords-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .fixed-keywords-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .keyword-button {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border: 2px solid #2196F3;
            color: #1976D2;
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .keyword-button:hover {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(33, 150, 243, 0.3);
        }

        .keyword-button.empty {
            background: #f5f5f5;
            border: 2px dashed #ccc;
            color: #999;
        }

        .keyword-button.empty:hover {
            background: #e0e0e0;
            border-color: #999;
            color: #666;
            transform: none;
            box-shadow: none;
        }

        /* 자유 검색 섹션 */
        .free-search-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .search-form {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .input-group {
            flex: 1;
            min-width: 200px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: #2196F3;
        }

        .btn {
            background: linear-gradient(45deg, #2196F3, #21CBF3);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #757575, #9E9E9E);
        }

        .btn-success {
            background: linear-gradient(45deg, #4CAF50, #66BB6A);
        }

        .btn-success:hover {
            background: linear-gradient(45deg, #388E3C, #4CAF50);
        }

        .btn-danger {
            background: linear-gradient(45deg, #f44336, #ef5350);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 14px;
        }

        /* 뉴스 소스 선택 */
        .news-source-selector {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .source-btn {
            padding: 8px 16px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .source-btn.active {
            background: #2196F3;
            color: white;
            border-color: #2196F3;
        }

        .source-btn:hover {
            border-color: #2196F3;
            color: #2196F3;
        }

        .source-btn.active:hover {
            background: #1976D2;
            border-color: #1976D2;
        }

        /* 키워드 관리 */
        .keyword-management {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .keyword-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .keyword-tag {
            background: white;
            border: 2px solid #2196F3;
            color: #2196F3;
            padding: 8px 15px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .keyword-tag.active {
            background: #2196F3;
            color: white;
        }

        .keyword-tag:hover {
            background: #e3f2fd;
        }

        .keyword-tag.active:hover {
            background: #1976D2;
        }

        .keyword-tag .delete-btn {
            background: transparent;
            border: none;
            color: inherit;
            cursor: pointer;
            font-weight: bold;
        }

        /* 키워드 입력 섹션 */
        .keyword-input-section {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
            align-items: flex-end;
        }

        /* 로딩 및 메시지 */
        .loading {
            text-align: center;
            padding: 20px;
            display: none;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #2196F3;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* 뉴스 그리드 */
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .news-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }

        .news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .news-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .news-card-content {
            padding: 20px;
        }

        .news-card h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.2rem;
            line-height: 1.4;
        }

        .news-card p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .news-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 15px;
        }

        .news-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }

        .news-link {
            color: #2196F3;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .news-link:hover {
            color: #1976D2;
        }

        .save-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .save-btn:hover {
            background: #2196F3;
            color: white;
        }

        .save-btn.saved {
            background: #4CAF50;
            color: white;
        }

        /* 메시지 */
        .error-message {
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .welcome-message {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        /* 통계 */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #e0e0e0;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #2196F3;
        }

        .stat-label {
            color: #666;
            margin-top: 5px;
        }

        /* 페이지네이션 */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
            gap: 10px;
            flex-wrap: wrap;
        }

        .pagination-btn {
            padding: 8px 12px;
            border: 2px solid #e0e0e0;
            background: white;
            color: #666;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            min-width: 40px;
            text-align: center;
        }

        .pagination-btn:hover {
            border-color: #2196F3;
            color: #2196F3;
            background: #f5f5f5;
        }

        .pagination-btn.active {
            background: #2196F3;
            color: white;
            border-color: #2196F3;
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: #f5f5f5;
        }

        .pagination-btn:disabled:hover {
            border-color: #e0e0e0;
            color: #666;
            background: #f5f5f5;
        }

        .pagination-info {
            font-size: 14px;
            color: #666;
            margin: 0 15px;
        }

        /* 반응형 디자인 */
        @media (max-width: 768px) {
            .search-form {
                flex-direction: column;
            }

            .input-group {
                min-width: 100%;
            }

            .header h1 {
                font-size: 2rem;
            }

            .tab-content {
                padding: 20px;
            }

            .nav-tabs {
                flex-direction: column;
            }

            .keyword-list {
                justify-content: center;
            }

            .keyword-input-section {
                flex-direction: column;
                align-items: stretch;
            }

            .keyword-input-section .btn {
                align-self: stretch !important;
                margin-top: 10px;
            }

            .fixed-keywords-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .news-source-selector {
                justify-content: center;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .agency-selector {
                flex-direction: column;
                gap: 10px;
            }
            
            .agency-btn {
                padding: 8px 12px;
                font-size: 12px;
            }
        }

        /* 정부 보도자료 전용 스타일 */
        .government-board-section {
            max-width: 100%;
        }

        .government-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .government-header h3 {
            color: #2196F3;
            margin-bottom: 10px;
        }

        .government-header p {
            color: #666;
            margin-bottom: 15px;
        }

        .update-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e0e0e0;
        }

        .update-time {
            font-size: 14px;
            color: #666;
        }

        /* 기관 선택 버튼 */
        .agency-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            padding: 20px;
            background: #ffffff;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .agency-btn {
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            background: white;
            color: #666;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            min-width: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .agency-btn:hover {
            border-color: #2196F3;
            color: #2196F3;
            background: #f5f5f5;
        }

        .agency-btn.active {
            background: #2196F3;
            color: white;
            border-color: #2196F3;
        }

        /* 정부 보도자료 통계 */
        .government-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0e0e0;
        }

        .stat-card .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #2196F3;
            margin-bottom: 5px;
        }

        .stat-card .stat-label {
            color: #666;
            font-size: 14px;
            font-weight: 500;
        }

        /* 새로고침 애니메이션 */
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .refreshing {
            animation: spin 1s linear infinite;
        }

        /* 정부 보도자료 그리드 레이아웃 */
        .government-news-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        /* 반응형: 작은 화면에서는 단일 열 */
        @media (max-width: 900px) {
            .government-news-list {
                grid-template-columns: 1fr;
            }
        }

        .government-news-card {
            display: flex;
            flex-direction: column;
            background: white;
            border-radius: 12px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            min-height: 180px;
            height: 100%;
        }

        .government-news-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }

        .government-news-card .news-content {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100%;
        }

        .government-news-card .news-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .government-news-card .news-source {
            background: linear-gradient(45deg, #2196F3, #21CBF3);
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }

        .government-news-card .news-date {
            color: #888;
            font-size: 12px;
        }

        .government-news-card .news-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            line-height: 1.4;
            margin: 0 0 8px 0;
        }

        .government-news-card .news-summary {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 0 0 15px 0;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .government-news-card .news-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }

        .government-news-card .news-link {
            color: #2196F3;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            transition: color 0.3s ease;
        }

        .government-news-card .news-link:hover {
            color: #1976D2;
            text-decoration: underline;
        }

        .government-news-card .save-btn {
            position: static;
            background: #f5f5f5;
            border: none;
            border-radius: 20px;
            width: 36px;
            height: 36px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .government-news-card .save-btn:hover {
            background: #2196F3;
            color: white;
            transform: scale(1.1);
        }

        .government-news-card .save-btn.saved {
            background: #4CAF50;
            color: white;
        }

        /* 반응형 디자인 - 모바일에서는 세로형으로 변경 */
        @media (max-width: 768px) {
            .government-news-card {
                flex-direction: column;
                min-height: auto;
            }
            
            .government-news-card .news-content {
                padding: 15px;
            }
            
            .government-news-card .news-summary {
                -webkit-line-clamp: 3;
            }
        }
        }
        /* 탭 전환 피드백 애니메이션 */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📰 뉴스 스크래퍼</h1>
            <p>스마트 키워드 시스템으로 뉴스를 빠르게 찾아보세요</p>
        </div>

        <!-- 네비게이션 탭 -->
        <div class="nav-tabs">
            <button class="nav-tab active" data-tab="quick">⚡ 빠른 검색</button>
            <button class="nav-tab" data-tab="boards">📂 내 게시판</button>
            <button class="nav-tab" data-tab="government">🏛️ 정부 보도자료</button>
            <button class="nav-tab" data-tab="manage">⚙️ 설정</button>
        </div>

        <!-- 빠른 검색 탭 -->
        <div id="quick-tab" class="tab-content active">
            <!-- 고정 키워드 섹션 -->
            <div class="fixed-keywords-section">
                <div class="fixed-keywords-header">
                    <h3>🔥 자주 찾는 키워드 (빠른 접근)</h3>
                    <button class="btn btn-secondary btn-small" data-tab-link="manage">키워드 설정</button>
                </div>
                
                <div class="fixed-keywords-grid" id="fixedKeywordsGrid">
                    <!-- 고정 키워드 버튼들이 여기에 표시됩니다 -->
                </div>
                
                <div class="news-source-info" style="margin-top: 10px; padding: 8px 12px; background: #e3f2fd; border-radius: 5px; font-size: 0.9rem; color: #1976d2;">
                    📰 <strong>뉴스 소스:</strong> 네이버 뉴스만 검색합니다
                </div>
            </div>

            <!-- 자유 검색 섹션 -->
            <div class="free-search-section">
                <h3>🔍 새로운 키워드 검색</h3>
                <p style="margin-bottom: 20px; color: #666;">위에 없는 키워드나 임시 검색용</p>
                
                <form class="search-form" id="newsForm">
                    <div class="input-group">
                        <label for="keyword">검색 키워드</label>
                        <input type="text" id="keyword" name="keyword" placeholder="예: 블록체인, 우주개발, 환경" required>
                    </div>
                    <div class="input-group">
                        <label for="source">뉴스 소스</label>
                        <select id="source" name="source" disabled style="background: #f5f5f5;">
                            <option value="naver" selected>네이버 뉴스 (고정)</option>
                        </select>
                    </div>
                    <button type="submit" class="btn" style="align-self: flex-end;">🔍 검색</button>
                </form>
            </div>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>뉴스를 검색하고 있습니다...</p>
            </div>

            <div id="search-results">
                <div class="welcome-message" id="welcomeMessage">
                    <h3>🎯 원하는 방법으로 뉴스를 찾아보세요</h3>
                    <p>🔥 <strong>자주 찾는 키워드</strong>: 클릭 한 번으로 하단에 뉴스 결과 표시<br>
                    🔍 <strong>새로운 키워드</strong>: 임시 검색이나 새로운 주제 탐색</p>
                </div>
            </div>
        </div>

        <!-- 게시판 탭 -->
        <div id="boards-tab" class="tab-content">
            <div style="background: #e8f5e8; border: 2px solid #4CAF50; border-radius: 8px; padding: 30px; margin: 20px 0;">
                <h2 style="color: #2E7D32; margin-top: 0;">✅ 내 게시판 탭이 성공적으로 로드되었습니다!</h2>
                <p style="font-size: 1.1rem; color: #388E3C;"><strong>이 내용이 보인다면 탭 전환이 정상적으로 작동하고 있습니다.</strong></p>
            </div>
            
            <div class="keyword-management">
                <h3>📂 저장된 키워드 게시판</h3>
                <div class="keyword-list" id="boardKeywordList">
                    <div style="background: #f5f5f5; padding: 20px; border-radius: 8px; text-align: center; color: #666;">
                        <p>📝 키워드 목록이 여기에 표시됩니다</p>
                        <p>현재 저장된 키워드가 없습니다. 메인 페이지에서 키워드를 저장해보세요.</p>
                    </div>
                </div>
            </div>

            <div id="board-content">
                <div class="welcome-message">
                    <h3>📋 게시판을 선택하세요</h3>
                    <p>위에서 키워드를 선택하면 해당 게시판의 저장된 기사들을 볼 수 있습니다.</p>
                </div>
            </div>
        </div>

        <!-- 정부 보도자료 탭 -->
        <div id="government-tab" class="tab-content">
            <div style="background: #e3f2fd; border: 2px solid #2196F3; border-radius: 8px; padding: 30px; margin: 20px 0;">
                <h2 style="color: #1565C0; margin-top: 0;">✅ 정부 보도자료 탭이 성공적으로 로드되었습니다!</h2>
                <p style="font-size: 1.1rem; color: #1976D2;"><strong>이 내용이 보인다면 탭 전환이 정상적으로 작동하고 있습니다.</strong></p>
            </div>
            
            <div class="government-board-section">
                <div class="government-header">
                    <h3>🏛️ 정부기관 보도자료 게시판</h3>
                    <p>금융위원회, 금융감독원, 공정거래위원회의 최신 보도자료를 확인하세요</p>
                    <div class="update-info">
                        <span class="update-time">마지막 업데이트: <span id="lastUpdateTime">-</span></span>
                        <button class="btn btn-secondary btn-small" id="refreshBtn">
                            <span id="refreshIcon">🔄</span> 새로고침
                        </button>
                    </div>
                </div>

                <!-- 기관 카테고리 선택 -->
                <div class="agency-selector">
                    <button class="agency-btn active" data-agency="all">📊 전체</button>
                    <button class="agency-btn" data-agency="fsc">💰 금융위원회</button>
                    <button class="agency-btn" data-agency="fss">🏦 금융감독원</button>
                    <button class="agency-btn" data-agency="ftc">⚖️ 공정거래위원회</button>
                </div>

                <!-- 보도자료 통계 -->
                <div class="government-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="totalCount">0</div>
                        <div class="stat-label">전체 보도자료</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="todayCount">0</div>
                        <div class="stat-label">오늘 등록</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="weekCount">0</div>
                        <div class="stat-label">이번 주</div>
                    </div>
                </div>

                <!-- 보도자료 목록 -->
                <div id="government-news-list" class="news-grid">
                    <div class="welcome-message">
                        <h3>📋 정부기관 보도자료</h3>
                        <p>새로고침 버튼을 클릭하여 최신 보도자료를 확인하세요.</p>
                        <p><small>※ 현재는 데모 데이터를 표시합니다. 실제 구현 시 정부기관 API 연동이 필요합니다.</small></p>
                    </div>
                </div>

                <!-- 페이지네이션 -->
                <div id="government-pagination" class="pagination-container" style="display: none;">
                    <div class="pagination-info">
                        <span id="government-page-info">1-6 of 60</span>
                    </div>
                    <div class="pagination-controls">
                        <button class="pagination-btn" id="government-prev-btn" onclick="changeGovernmentPage(-1)">이전</button>
                        <div class="pagination-numbers" id="government-page-numbers">
                            <!-- 페이지 번호들이 여기에 표시됩니다 -->
                        </div>
                        <button class="pagination-btn" id="government-next-btn" onclick="changeGovernmentPage(1)">다음</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 설정 탭 -->
        <div id="manage-tab" class="tab-content">
            <!-- 고정 키워드 설정 -->
            <div class="keyword-management">
                <h3>🔥 고정 키워드 설정 (최대 15개)</h3>
                <p>자주 검색하는 키워드를 설정하면 클릭 한 번으로 하단에 뉴스 결과가 표시됩니다.</p>
                
                <div class="keyword-input-section">
                    <div class="input-group" style="flex: 1;">
                        <label for="fixedKeyword">고정 키워드</label>
                        <input type="text" id="fixedKeyword" placeholder="예: AI, 경제, 정치, 스포츠">
                    </div>
                    <button type="button" class="btn btn-success" onclick="addFixedKeyword()" style="align-self: flex-end;">📌 고정 추가</button>
                </div>

                <div class="keyword-list" id="fixedKeywordsList">
                    <!-- 고정 키워드 목록이 여기에 표시됩니다 -->
                </div>
            </div>

            <!-- 일반 키워드 관리 -->
            <div class="keyword-management">
                <h3>📝 일반 키워드 관리</h3>
                <p>게시판용 키워드를 추가하거나 삭제할 수 있습니다.</p>
                
                <div class="keyword-input-section">
                    <div class="input-group" style="flex: 1;">
                        <label for="newKeyword">새 키워드</label>
                        <input type="text" id="newKeyword" placeholder="예: 블록체인, 우주개발, 환경">
                    </div>
                    <button type="button" class="btn btn-success" onclick="addKeyword()" style="align-self: flex-end;">➕ 추가</button>
                </div>

                <div class="keyword-list" id="manageKeywordList">
                    <!-- 키워드 목록이 여기에 표시됩니다 -->
                </div>
            </div>

            <!-- 통계 -->
            <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 8px;">
                <h4>📊 통계</h4>
                <div class="stats-grid" id="statsGrid"></div>
            </div>
        </div>
    </div>

    <script>
        // 전역 변수
        let currentKeyword = null;
        let keywords = JSON.parse(localStorage.getItem('newsKeywords')) || [];
        let savedArticles = JSON.parse(localStorage.getItem('savedArticles')) || {};
        let fixedKeywords = JSON.parse(localStorage.getItem('fixedKeywords')) || ['AI', '경제', '정치', '기술', '스포츠', '건강', '문화', '연예', '게임', '자동차'];
        
        // 페이지네이션 변수
        let currentPage = 1;
        let totalPages = 10;
        let articlesPerPage = 6;
        let allArticles = [];

        // 초기화
        document.addEventListener('DOMContentLoaded', function() {
            try {
                console.log('뉴스 스크래퍼가 준비되었습니다!');
                console.log('DOM 초기화 시작...');
                
                // 🔧 탭 초기 상태 강제 설정
                console.log('🔧 탭 초기 상태 설정 중...');
                
                // 모든 탭 콘텐츠를 명시적으로 숨김
                const allTabContents = document.querySelectorAll('.tab-content');
                allTabContents.forEach(content => {
                    content.classList.remove('active');
                    console.log(`   - 탭 숨김: ${content.id}`);
                });
                
                // 모든 탭 버튼을 명시적으로 비활성화
                const allTabButtons = document.querySelectorAll('.nav-tab');
                allTabButtons.forEach(button => {
                    button.classList.remove('active');
                });
                
                // 빠른 검색 탭만 명시적으로 활성화
                const quickTab = document.getElementById('quick-tab');
                const quickButton = document.querySelector('[data-tab="quick"]');
                
                if (quickTab && quickButton) {
                    quickTab.classList.add('active');
                    quickButton.classList.add('active');
                    console.log('✅ 빠른 검색 탭 초기화 완료');
                } else {
                    console.error('❌ 빠른 검색 탭 요소를 찾을 수 없음');
                }
                
                console.log('🎯 탭 초기화 완료, 메인 시스템 초기화 시작...');
                
                updateAllKeywordLists();
                updateStatistics();
                setupNewsSourceSelector();
                
                // 정부 보도자료 시스템은 탭 전환 시 초기화됨
                
                // 키워드 입력 필드에서 Enter 키 처리
                const newKeywordInput = document.getElementById('newKeyword');
                if (newKeywordInput) {
                    newKeywordInput.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') addKeyword();
                    });
                    console.log('newKeyword 이벤트 리스너 추가됨');
                } else {
                    console.warn('newKeyword 엘리먼트를 찾을 수 없습니다');
                }
                
                const fixedKeywordInput = document.getElementById('fixedKeyword');
                if (fixedKeywordInput) {
                    fixedKeywordInput.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') addFixedKeyword();
                    });
                    console.log('fixedKeyword 이벤트 리스너 추가됨');
                } else {
                    console.warn('fixedKeyword 엘리먼트를 찾을 수 없습니다');
                }
                
                // 📊 기관 필터 버튼들에 이벤트 리스너 추가
                console.log('🏛️ 기관 필터 버튼 이벤트 리스너 설정 중...');
                const agencyButtons = document.querySelectorAll('.agency-btn[data-agency]');
                console.log(`발견된 기관 버튼 수: ${agencyButtons.length}`);
                
                agencyButtons.forEach(button => {
                    const agency = button.getAttribute('data-agency');
                    console.log(`기관 버튼 설정: ${agency} - ${button.textContent.trim()}`);
                    
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        console.log(`🏛️ 기관 버튼 클릭됨: ${agency}`);
                        try {
                            selectAgency(agency);
                        } catch (error) {
                            console.error(`기관 선택 오류 (${agency}):`, error);
                        }
                    });
                });
                
                // 🔄 정부 보도자료 새로고침 버튼 이벤트 리스너 추가
                console.log('🔄 새로고침 버튼 이벤트 리스너 설정 중...');
                const refreshBtn = document.getElementById('refreshBtn');
                if (refreshBtn) {
                    refreshBtn.addEventListener('click', async function(e) {
                        e.preventDefault();
                        console.log('🔄 새로고침 버튼 클릭됨');
                        try {
                            await refreshGovernmentNews();
                        } catch (error) {
                            console.error('새로고침 오류:', error);
                        }
                    });
                    console.log('✅ 새로고침 버튼 이벤트 리스너 설정 완료');
                } else {
                    console.warn('⚠️ refreshBtn 엘리먼트를 찾을 수 없습니다');
                }
                
                console.log('✅ 모든 기관 필터 및 새로고침 버튼 이벤트 리스너 설정 완료');
                console.log('DOM 초기화 완료!');
                
                // 📊 탭 버튼들에 이벤트 리스너 추가
                console.log('🔗 탭 버튼 이벤트 리스너 설정 중...');
                const tabButtons = document.querySelectorAll('.nav-tab[data-tab]');
                console.log(`발견된 탭 버튼 수: ${tabButtons.length}`);
                
                tabButtons.forEach(button => {
                    const tabName = button.getAttribute('data-tab');
                    console.log(`탭 버튼 설정: ${tabName} - ${button.textContent.trim()}`);
                    
                    button.addEventListener('click', async function(e) {
                        e.preventDefault();
                        console.log(`🖱️ 탭 버튼 클릭됨: ${tabName}`);
                        try {
                            await switchTab(tabName);
                        } catch (error) {
                            console.error(`탭 전환 오류 (${tabName}):`, error);
                        }
                    });
                });
                
                // 추가 탭 링크 버튼들도 설정
                const tabLinkButtons = document.querySelectorAll('[data-tab-link]');
                tabLinkButtons.forEach(button => {
                    const tabName = button.getAttribute('data-tab-link');
                    console.log(`탭 링크 버튼 설정: ${tabName} - ${button.textContent.trim()}`);
                    
                    button.addEventListener('click', async function(e) {
                        e.preventDefault();
                        console.log(`🖱️ 탭 링크 버튼 클릭됨: ${tabName}`);
                        try {
                            await switchTab(tabName);
                        } catch (error) {
                            console.error(`탭 전환 오류 (${tabName}):`, error);
                        }
                    });
                });
                
                console.log('✅ 모든 탭 버튼 이벤트 리스너 설정 완료');
                
                // switchTab 함수 확인
                if (typeof switchTab === 'function') {
                    console.log('✅ switchTab 함수가 정상적으로 정의되었습니다');
                } else {
                    console.error('❌ switchTab 함수가 정의되지 않았습니다!');
                }
                
            } catch (error) {
                console.error('DOM 초기화 중 오류 발생:', error);
            }
        });

        // 탭 전환
        // 탭 전환 시각적 피드백 함수
        function showTabSwitchFeedback(tabName) {
            const tabNames = {
                'quick': '⚡ 빠른 검색',
                'boards': '📂 내 게시판', 
                'government': '🏛️ 정부 보도자료',
                'manage': '⚙️ 설정'
            };
            
            // 기존 피드백 제거
            const existingFeedback = document.getElementById('tab-switch-feedback');
            if (existingFeedback) {
                existingFeedback.remove();
            }
            
            // 새 피드백 생성
            const feedback = document.createElement('div');
            feedback.id = 'tab-switch-feedback';
            feedback.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #4CAF50, #45a049);
                color: white;
                padding: 15px 25px;
                border-radius: 25px;
                font-weight: bold;
                font-size: 1rem;
                z-index: 10000;
                box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
                transition: all 0.3s ease;
                animation: slideInRight 0.3s ease;
            `;
            feedback.textContent = `${tabNames[tabName]} 활성화됨`;
            
            document.body.appendChild(feedback);
            
            // 3초 후 자동 제거
            setTimeout(() => {
                if (feedback.parentNode) {
                    feedback.style.animation = 'slideOutRight 0.3s ease';
                    setTimeout(() => feedback.remove(), 300);
                }
            }, 3000);
        }
        
        // 간단하고 확실한 탭 전환 함수
        function simpleSwitchTab(tabName) {
            console.log(`🚀 SIMPLE SWITCH: ${tabName}`);
            
            try {
                // 시각적 피드백
                showTabSwitchFeedback(tabName);
                
                // 모든 탭 비활성화
                document.querySelectorAll('.nav-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // 모든 컴텐츠 숨김
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                // 클릭된 버튼 활성화
                const targetButton = document.querySelector(`[onclick*="${tabName}"]`);
                if (targetButton) {
                    targetButton.classList.add('active');
                }
                
                // 해당 컴텐츠 표시
                const targetContent = document.getElementById(`${tabName}-tab`);
                if (targetContent) {
                    targetContent.classList.add('active');
                    console.log(`✅ ${tabName} 탭 활성화 완료`);
                } else {
                    console.error(`❌ ${tabName}-tab 컴텐츠를 찾을 수 없음`);
                }
                
            } catch (error) {
                console.error('❌ Simple switch error:', error);
                alert(`탭 전환 오류: ${error.message}`);
            }
        }
        
        function switchTab(tabName) {
            try {
                console.log(`🔄 탭 전환 시작: ${tabName}`);
                console.log(`   - 브라우저: ${navigator.userAgent}`);
                console.log(`   - 화면 크기: ${window.innerWidth}x${window.innerHeight}`);
                
                // 시각적 피드백 표시
                showTabSwitchFeedback(tabName);
                
                // 현재 활성 탭 상태 확인
                const currentActiveTab = document.querySelector('.nav-tab.active');
                const currentActiveContent = document.querySelector('.tab-content.active');
                console.log(`현재 활성 탭: ${currentActiveTab ? currentActiveTab.textContent.trim() : 'none'}`);
                console.log(`현재 활성 컨텐츠: ${currentActiveContent ? currentActiveContent.id : 'none'}`);
                
                // 모든 탭 버튼에서 active 클래스 제거
                const allTabs = document.querySelectorAll('.nav-tab');
                console.log(`총 탭 버튼 수: ${allTabs.length}`);
                allTabs.forEach(tab => {
                    tab.classList.remove('active');
                    console.log(`탭 버튼 비활성화: ${tab.textContent.trim()}`);
                });
                
                // 모든 탭 컨텐츠에서 active 클래스 제거  
                const allContents = document.querySelectorAll('.tab-content');
                console.log(`총 탭 컨텐츠 수: ${allContents.length}`);
                allContents.forEach(content => {
                    content.classList.remove('active');
                    console.log(`탭 컨텐츠 숨김: ${content.id} (display: ${getComputedStyle(content).display})`);
                });
                
                // 클릭된 탭 버튼 활성화
                const targetTab = document.querySelector(`[data-tab="${tabName}"]`);
                if (targetTab) {
                    targetTab.classList.add('active');
                    console.log(`✅ 탭 버튼 활성화: ${targetTab.textContent.trim()}`);
                } else {
                    console.warn(`⚠️ 탭 버튼을 찾을 수 없음: ${tabName}`);
                }
                
                // 해당 탭 컨텐츠 표시
                const targetContent = document.getElementById(tabName + '-tab');
                if (targetContent) {
                    console.log(`탭 컨텐츠 발견: ${targetContent.id}`);
                    targetContent.classList.add('active');
                    
                    // CSS 적용 확인
                    setTimeout(() => {
                        const computedStyle = getComputedStyle(targetContent);
                        console.log(`✅ 탭 컨텐츠 표시 완료: ${targetContent.id}`);
                        console.log(`   - display: ${computedStyle.display}`);
                        console.log(`   - visibility: ${computedStyle.visibility}`);
                        console.log(`   - opacity: ${computedStyle.opacity}`);
                        console.log(`   - z-index: ${computedStyle.zIndex}`);
                        
                        if (computedStyle.display === 'none') {
                            console.error(`❌ 탭 컨텐츠가 여전히 숨겨져 있음: ${targetContent.id}`);
                        }
                    }, 100);
                    
                } else {
                    console.error(`❌ 탭 컨텐츠를 찾을 수 없습니다: ${tabName}-tab`);
                }
                
                // 탭별 초기화 함수 호출
                if (tabName === 'boards') {
                    updateAllKeywordLists();
                    console.log('🎯 내 게시판 탭 초기화 완료');
                } else if (tabName === 'manage') {
                    updateAllKeywordLists();
                    updateStatistics();
                    console.log('🎯 설정 탭 초기화 완료');
                } else if (tabName === 'government') {
                    initGovernmentTab();
                    console.log('🎯 정부 보도자료 탭 초기화 완료');
                } else if (tabName === 'quick') {
                    updateAllKeywordLists();
                    console.log('🎯 빠른 검색 탭 초기화 완료');
                }
                
                console.log(`🎉 탭 전환 완료: ${tabName}`);
                
            } catch (error) {
                console.error('❌ 탭 전환 오류:', error);
                console.error('스택 트레이스:', error.stack);
            }
        }

        // 뉴스 소스 선택기 설정 (네이버 전용으로 간소화)
        function setupNewsSourceSelector() {
            // 네이버 뉴스만 사용하므로 별도 설정 불필요
            console.log('뉴스 소스: 네이버 뉴스 전용');
        }

        // 고정 키워드 추가
        function addFixedKeyword() {
            const input = document.getElementById('fixedKeyword');
            const keyword = input.value.trim();
            
            if (!keyword) {
                alert('키워드를 입력해주세요.');
                return;
            }
            
            if (fixedKeywords.length >= 10) {
                alert('고정 키워드는 최대 10개까지만 추가할 수 있습니다.');
                return;
            }
            
            if (fixedKeywords.includes(keyword)) {
                alert('이미 존재하는 고정 키워드입니다.');
                return;
            }
            
            fixedKeywords.push(keyword);
            saveData();
            input.value = '';
            updateAllKeywordLists();
            
            alert(`"${keyword}" 키워드가 고정 키워드로 추가되었습니다.`);
        }

        // 고정 키워드 삭제
        function removeFixedKeyword(keyword) {
            if (!confirm(`"${keyword}" 고정 키워드를 삭제하시겠습니까?`)) {
                return;
            }
            
            fixedKeywords = fixedKeywords.filter(k => k !== keyword);
            saveData();
            updateAllKeywordLists();
        }

        // 일반 키워드 추가
        function addKeyword() {
            const input = document.getElementById('newKeyword');
            const keyword = input.value.trim();
            
            if (!keyword) {
                alert('키워드를 입력해주세요.');
                return;
            }
            
            if (keywords.includes(keyword)) {
                alert('이미 존재하는 키워드입니다.');
                return;
            }
            
            keywords.push(keyword);
            savedArticles[keyword] = [];
            saveData();
            input.value = '';
            updateAllKeywordLists();
            updateStatistics();
            
            alert(`"${keyword}" 키워드가 추가되었습니다.`);
        }

        // 일반 키워드 삭제
        function deleteKeyword(keyword) {
            if (!confirm(`"${keyword}" 키워드와 저장된 모든 기사를 삭제하시겠습니까?`)) {
                return;
            }
            
            keywords = keywords.filter(k => k !== keyword);
            delete savedArticles[keyword];
            
            if (currentKeyword === keyword) {
                currentKeyword = null;
                showBoardWelcome();
            }
            
            saveData();
            updateAllKeywordLists();
            updateStatistics();
        }

        // 고정 키워드 클릭 - 하단에 뉴스 검색 결과 표시 (네이버 전용)
        function onFixedKeywordClick(keyword) {
            // 빠른 검색 탭에 있는지 확인
            const quickTab = document.getElementById('quick-tab');
            if (!quickTab.classList.contains('active')) {
                // 빠른 검색 탭으로 전환
                switchTab('quick');
            }
            
            // 네이버 뉴스만 검색
            searchNews(keyword, 'naver');
        }

        // 네이버 뉴스 전용으로 소스 선택기 불필요
        function showSourceSelector() {
            // 네이버 뉴스만 사용하므로 별도 표시 불필요
        }

        // 모든 키워드 목록 업데이트
        function updateAllKeywordLists() {
            updateFixedKeywordsList();
            updateFixedKeywordsGrid();
            updateBoardKeywordList();
            updateManageKeywordList();
        }

        // 고정 키워드 그리드 업데이트
        function updateFixedKeywordsGrid() {
            const grid = document.getElementById('fixedKeywordsGrid');
            grid.innerHTML = '';
            
            // 최대 10개 슬롯 생성
            for (let i = 0; i < 10; i++) {
                const button = document.createElement('button');
                button.className = 'keyword-button';
                
                if (i < fixedKeywords.length) {
                    const keyword = fixedKeywords[i];
                    button.textContent = keyword;
                    button.onclick = () => onFixedKeywordClick(keyword);
                    button.onmouseenter = showSourceSelector;
                } else {
                    button.textContent = '+ 키워드 추가';
                    button.className += ' empty';
                    button.onclick = () => {
                        switchTab('manage');
                        document.getElementById('fixedKeyword').focus();
                    };
                }
                
                grid.appendChild(button);
            }
        }

        // 설정 탭의 고정 키워드 목록 업데이트
        function updateFixedKeywordsList() {
            const list = document.getElementById('fixedKeywordsList');
            list.innerHTML = '';
            
            fixedKeywords.forEach(keyword => {
                const tag = document.createElement('div');
                tag.className = 'keyword-tag';
                tag.innerHTML = `
                    📌 ${keyword}
                    <button class="delete-btn" onclick="event.stopPropagation(); removeFixedKeyword('${keyword}')">×</button>
                `;
                list.appendChild(tag);
            });
            
            if (fixedKeywords.length === 0) {
                list.innerHTML = '<p style="color: #666; text-align: center; padding: 20px;">고정 키워드를 추가해주세요.</p>';
            }
        }

        // 게시판 키워드 목록 업데이트
        function updateBoardKeywordList() {
            const boardList = document.getElementById('boardKeywordList');
            boardList.innerHTML = '';
            
            keywords.forEach(keyword => {
                const count = savedArticles[keyword] ? savedArticles[keyword].length : 0;
                const tag = document.createElement('div');
                tag.className = `keyword-tag ${currentKeyword === keyword ? 'active' : ''}`;
                tag.innerHTML = `${keyword} (${count})`;
                tag.onclick = () => selectKeyword(keyword);
                boardList.appendChild(tag);
            });
            
            if (keywords.length === 0) {
                boardList.innerHTML = '<p style="color: #666; text-align: center; padding: 20px;">저장된 키워드가 없습니다. 설정에서 추가해주세요.</p>';
            }
        }

        // 설정 탭의 일반 키워드 목록 업데이트
        function updateManageKeywordList() {
            const manageList = document.getElementById('manageKeywordList');
            manageList.innerHTML = '';
            
            keywords.forEach(keyword => {
                const count = savedArticles[keyword] ? savedArticles[keyword].length : 0;
                const tag = document.createElement('div');
                tag.className = 'keyword-tag';
                tag.innerHTML = `
                    ${keyword} (${count})
                    <button class="delete-btn" onclick="event.stopPropagation(); deleteKeyword('${keyword}')">×</button>
                `;
                manageList.appendChild(tag);
            });
            
            if (keywords.length === 0) {
                manageList.innerHTML = '<p style="color: #666; text-align: center; padding: 20px;">키워드를 추가해주세요.</p>';
            }
        }

        // 키워드 선택
        function selectKeyword(keyword) {
            currentKeyword = keyword;
            updateAllKeywordLists();
            showSavedArticles(keyword);
        }

        // 저장된 기사 표시
        function showSavedArticles(keyword) {
            const boardContent = document.getElementById('board-content');
            const articles = savedArticles[keyword] || [];
            
            if (articles.length === 0) {
                boardContent.innerHTML = `
                    <div class="no-results">
                        <h3>📭 "${keyword}" 게시판이 비어있습니다</h3>
                        <p>뉴스 검색에서 관련 기사를 검색하고 저장해보세요.</p>
                    </div>
                `;
                return;
            }
            
            boardContent.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px;">
                    <h3>📂 ${keyword} 게시판</h3>
                    <div style="color: #666; font-size: 0.9rem;">총 ${articles.length}개의 기사</div>
                </div>
                <div class="news-grid" id="savedNewsGrid"></div>
            `;
            
            const newsGrid = document.getElementById('savedNewsGrid');
            articles.forEach((article, index) => {
                const newsCard = document.createElement('div');
                newsCard.className = 'news-card';
                
                newsCard.innerHTML = `
                    <img src="${article.imageUrl}" alt="뉴스 이미지" onerror="this.src='https://via.placeholder.com/300x200?text=No+Image'">
                    <div class="news-card-content">
                        <div class="news-meta">
                            <span>${article.source}</span>
                            <span>${article.savedAt}</span>
                        </div>
                        <h3>${article.title}</h3>
                        <p>${article.description}</p>
                        <div class="news-actions">
                            <a href="${article.url}" class="news-link" target="_blank">자세히 읽기 →</a>
                            <button class="btn btn-danger btn-small" onclick="removeArticle('${keyword}', ${index})">삭제</button>
                        </div>
                    </div>
                `;
                
                newsGrid.appendChild(newsCard);
            });
        }

        // 게시판 환영 메시지
        function showBoardWelcome() {
            const boardContent = document.getElementById('board-content');
            boardContent.innerHTML = `
                <div class="welcome-message">
                    <h3>📋 게시판을 선택하세요</h3>
                    <p>위에서 키워드를 선택하면 해당 게시판의 저장된 기사들을 볼 수 있습니다.</p>
                </div>
            `;
        }

        // 기사 제거
        function removeArticle(keyword, index) {
            if (!confirm('이 기사를 삭제하시겠습니까?')) {
                return;
            }
            
            savedArticles[keyword].splice(index, 1);
            saveData();
            showSavedArticles(keyword);
            updateAllKeywordLists();
            updateStatistics();
        }

        // 통계 업데이트
        function updateStatistics() {
            const statsGrid = document.getElementById('statsGrid');
            const totalKeywords = keywords.length;
            const totalArticles = Object.values(savedArticles).reduce((sum, articles) => sum + articles.length, 0);
            const fixedKeywordsCount = fixedKeywords.length;
            
            statsGrid.innerHTML = `
                <div class="stat-card">
                    <div class="stat-number">${fixedKeywordsCount}</div>
                    <div class="stat-label">고정 키워드</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${totalKeywords}</div>
                    <div class="stat-label">전체 키워드</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${totalArticles}</div>
                    <div class="stat-label">저장된 기사</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${totalKeywords > 0 ? Math.round(totalArticles / totalKeywords * 10) / 10 : 0}</div>
                    <div class="stat-label">평균 기사 수</div>
                </div>
            `;
        }

        // 뉴스 검색 폼 이벤트
        document.getElementById('newsForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const keyword = document.getElementById('keyword').value;
            const source = document.getElementById('source').value;
            
            if (!keyword.trim()) {
                alert('검색 키워드를 입력해주세요.');
                return;
            }
            
            searchNews(keyword, source);
        });

        // 뉴스 검색
        async function searchNews(keyword, source) {
            const loading = document.getElementById('loading');
            const results = document.getElementById('search-results');
            const welcomeMessage = document.getElementById('welcomeMessage');
            
            // 로딩 표시
            loading.style.display = 'block';
            welcomeMessage.style.display = 'none';
            results.innerHTML = '';
            
            try {
                const demoNews = generateDemoNews(keyword, source);
                
                // 로딩 시뮬레이션 (2초)
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                displaySearchNews(demoNews, keyword);
            } catch (error) {
                displayError('뉴스를 불러오는 중 오류가 발생했습니다.');
            } finally {
                loading.style.display = 'none';
            }
        }

        // 검색 결과 표시 (페이지네이션 포함)
        function displaySearchNews(articles, searchKeyword) {
            const results = document.getElementById('search-results');
            
            if (articles.length === 0) {
                results.innerHTML = '<div class="no-results"><h3>검색 결과가 없습니다</h3><p>다른 키워드로 검색해보세요.</p></div>';
                return;
            }
            
            // 전체 기사 저장 및 페이지 초기화
            allArticles = articles;
            currentPage = 1;
            totalPages = Math.ceil(articles.length / articlesPerPage);
            
            // 검색 결과 헤더 생성
            results.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px;">
                    <h3>🔍 "${searchKeyword}" 검색 결과</h3>
                    <div style="color: #666; font-size: 0.9rem;">총 ${articles.length}개 기사 (${totalPages}페이지)</div>
                </div>
                <div class="news-grid" id="searchNewsGrid"></div>
                <div class="pagination" id="pagination"></div>
            `;
            
            // 처음 페이지 표시
            displayPage(searchKeyword, 1);
        }
        
        // 페이지 표시 기능
        function displayPage(searchKeyword, page) {
            currentPage = page;
            const startIndex = (page - 1) * articlesPerPage;
            const endIndex = startIndex + articlesPerPage;
            const pageArticles = allArticles.slice(startIndex, endIndex);
            
            const newsGrid = document.getElementById('searchNewsGrid');
            newsGrid.innerHTML = '';
            
            // 현재 페이지 기사 표시
            pageArticles.forEach((article, index) => {
                const globalIndex = startIndex + index;
                const newsCard = document.createElement('div');
                newsCard.className = 'news-card';
                
                newsCard.innerHTML = `
                    <button class="save-btn" onclick="saveArticle(${globalIndex}, '${searchKeyword}')" title="기사 저장">
                        💾
                    </button>
                    <img src="${article.imageUrl}" alt="뉴스 이미지" onerror="this.src='https://via.placeholder.com/300x200?text=No+Image'">
                    <div class="news-card-content">
                        <div class="news-meta">
                            <span>${article.source}</span>
                            <span>${article.publishedAt}</span>
                        </div>
                        <h3>${article.title}</h3>
                        <p>${article.description}</p>
                        <a href="${article.url}" class="news-link" target="_blank">자세히 읽기 →</a>
                    </div>
                `;
                
                newsGrid.appendChild(newsCard);
            });
            
            // 페이지네이션 업데이트
            updatePagination(searchKeyword);
            
            // 검색된 기사들을 전역 변수에 저장
            window.currentSearchResults = allArticles;
        }
        
        // 페이지네이션 UI 업데이트
        function updatePagination(searchKeyword) {
            const pagination = document.getElementById('pagination');
            let paginationHTML = '';
            
            // 이전 버튼
            paginationHTML += `<button class="pagination-btn" onclick="goToPage('${searchKeyword}', ${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>‹ 이전</button>`;
            
            // 페이지 번호들
            const startPage = Math.max(1, currentPage - 2);
            const endPage = Math.min(totalPages, currentPage + 2);
            
            if (startPage > 1) {
                paginationHTML += `<button class="pagination-btn" onclick="goToPage('${searchKeyword}', 1)">1</button>`;
                if (startPage > 2) {
                    paginationHTML += `<span class="pagination-info">...</span>`;
                }
            }
            
            for (let i = startPage; i <= endPage; i++) {
                paginationHTML += `<button class="pagination-btn ${i === currentPage ? 'active' : ''}" onclick="goToPage('${searchKeyword}', ${i})">${i}</button>`;
            }
            
            if (endPage < totalPages) {
                if (endPage < totalPages - 1) {
                    paginationHTML += `<span class="pagination-info">...</span>`;
                }
                paginationHTML += `<button class="pagination-btn" onclick="goToPage('${searchKeyword}', ${totalPages})">${totalPages}</button>`;
            }
            
            // 다음 버튼
            paginationHTML += `<button class="pagination-btn" onclick="goToPage('${searchKeyword}', ${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>다음 ›</button>`;
            
            // 페이지 정보
            paginationHTML += `<span class="pagination-info">${currentPage} / ${totalPages} 페이지</span>`;
            
            pagination.innerHTML = paginationHTML;
        }
        
        // 페이지 이동 기능
        function goToPage(searchKeyword, page) {
            if (page < 1 || page > totalPages || page === currentPage) {
                return;
            }
            displayPage(searchKeyword, page);
            
            // 뉴스 결과 영역으로 스크롤
            const searchResults = document.getElementById('search-results');
            searchResults.scrollIntoView({ behavior: 'smooth' });
        }

        // 기사 저장 (중복 제거 강화)
        function saveArticle(index, searchKeyword) {
            const article = allArticles[index];
            
            // 키워드가 없으면 자동으로 추가
            if (!keywords.includes(searchKeyword)) {
                keywords.push(searchKeyword);
                savedArticles[searchKeyword] = [];
            }
            
            // 강화된 중복 체크 (제목과 URL 모두 확인)
            const isDuplicate = savedArticles[searchKeyword].some(saved => 
                saved.title === article.title || 
                saved.url === article.url ||
                (saved.title.includes(article.title.slice(0, 20)) && saved.title.length > 20)
            );
            
            if (isDuplicate) {
                alert('이미 저장된 기사이거나 유사한 기사가 있습니다.');
                return;
            }
            
            // 저장 시간 추가
            article.savedAt = new Date().toLocaleString('ko-KR');
            
            // 기사 저장
            savedArticles[searchKeyword].push(article);
            saveData();
            updateAllKeywordLists();
            updateStatistics();
            
            // 저장 버튼 상태 변경
            const saveBtn = event.target;
            saveBtn.classList.add('saved');
            saveBtn.innerHTML = '✅';
            saveBtn.onclick = null;
            
            alert('기사가 저장되었습니다!');
        }

        // 네이버 전용 뉴스 생성 (정확한 키워드만 사용)
        function generateDemoNews(keyword, source) {
            // 키워드만 사용하는 정확한 검색 결과 시뮬레이션
            const titleVariations = [
                `${keyword} 최신 소식`,
                `${keyword} 업계 동향`,
                `${keyword} 전문가 분석`,
                `${keyword} 정책 발표`,
                `${keyword} 기업 소식`,
                `${keyword} 시장 현황`,
                `${keyword} 규제 소식`,
                `${keyword} 연구 결과`,
                `${keyword} 글로벌 동향`,
                `${keyword} 투자 소식`,
                `${keyword} 업계 뉴스`,
                `${keyword} 정부 보도`,
                `${keyword} 기술 소식`,
                `${keyword} 경제 영향`,
                `${keyword} 소비자 관심`,
                `${keyword} 산업 전망`,
                `${keyword} 전문가 의견`,
                `${keyword} 정책 변화`,
                `${keyword} 시장 분석`,
                `${keyword} 업계 반응`
            ];

            const suffixes = [
                '혁신적인 변화 예상',
                '주목할 만한 성과',
                '새로운 도전과 기회',
                '전망과 과제',
                '주요 이슈 정리',
                '심층 분석',
                '최신 동향',
                '업계 반응',
                '전문가 진단',
                '미래 전략',
                '현황과 대응',
                '발전 방향',
                '변화의 바람',
                '성장 동력',
                '핵심 포인트',
                '브레이킹 뉴스',
                '긴급 속보',
                '독점 보도',
                '특별 취재',
                '심화 분석'
            ];

            const newsTopics = [
                '혁신', '발전', '성장', '변화', '전략', '정책', '기술', '투자', 
                '협력', '경쟁', '규제', '개발', '연구', '시장', '트렌드', 
                '미래', '도전', '기회', '위험', '대응'
            ];

            // 네이버 뉴스 소스로 통일
            const sourceType = '네이버 뉴스';

            const demoArticles = [];
            const currentTime = new Date().getTime();
            const uniqueTitles = new Set(); // 중복 제목 방지
            
            // 30개의 고유한 기사 생성 (중복 제거)
            for (let i = 0; i < 30; i++) {
                const titleBase = titleVariations[i % titleVariations.length];
                const suffix = suffixes[Math.floor(Math.random() * suffixes.length)];
                
                // 시간 간격을 더 다양하게 (30분~4시간 사이)
                const timeOffset = i * (30 + Math.random() * 210) * 60 * 1000;
                const articleTime = currentTime - timeOffset;
                
                // 고유한 제목 생성 (중복 방지)
                let title = `${titleBase} - ${suffix}`;
                let attempts = 0;
                while (uniqueTitles.has(title) && attempts < 10) {
                    const altSuffix = suffixes[Math.floor(Math.random() * suffixes.length)];
                    title = `${titleBase} - ${altSuffix}`;
                    attempts++;
                }
                uniqueTitles.add(title);
                
                // 키워드 중심의 간결한 설명 생성
                const descriptions = [
                    `${keyword}에 대한 최신 뉴스와 전문가 분석을 제공합니다.`,
                    `${keyword} 관련 업계 동향과 주요 이슈를 정리했습니다.`,
                    `${keyword}의 최근 변화와 시장에 미치는 영향을 다룹니다.`,
                    `${keyword}에 대한 정부 정책과 업계 반응을 종합 보도합니다.`,
                    `${keyword} 분야의 주요 소식과 향후 전망을 분석합니다.`
                ];
                
                const description = descriptions[i % descriptions.length];
                
                // 네이버 뉴스 전용 URL (정확한 키워드만 사용)
                const url = `https://search.naver.com/search.naver?where=news&query=${encodeURIComponent(keyword)}`;
                
                const uniqueId = Math.random().toString(36).substr(2, 9);
                
                demoArticles.push({
                    id: `demo_${uniqueId}`,
                    title: title,
                    description: description,
                    url: url,
                    source: sourceType,
                    publishedAt: new Date(articleTime).toLocaleString('ko-KR'),
                    imageUrl: `https://via.placeholder.com/300x200/00C73C/ffffff?text=${encodeURIComponent(keyword)}`,
                    timestamp: articleTime
                });
            }
            
            // 최신순 정렬 및 중복 제거 (제목 기준)
            const uniqueArticles = demoArticles.filter((article, index, self) => 
                index === self.findIndex(a => a.title === article.title)
            );
            
            return uniqueArticles.sort((a, b) => b.timestamp - a.timestamp);
        }

        // 소스 이름 반환 (네이버 전용)
        function getSourceName(source) {
            return '네이버 뉴스';
        }

        // 날짜 포맷팅 함수
        function formatDate(date) {
            const now = new Date();
            const inputDate = new Date(date);
            const diffMs = now - inputDate;
            const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
            const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
            
            if (diffHours < 1) {
                const diffMinutes = Math.floor(diffMs / (1000 * 60));
                return `${diffMinutes}분 전`;
            } else if (diffHours < 24) {
                return `${diffHours}시간 전`;
            } else if (diffDays < 7) {
                return `${diffDays}일 전`;
            } else {
                const month = inputDate.getMonth() + 1;
                const day = inputDate.getDate();
                return `${month}월 ${day}일`;
            }
        }

        // 에러 표시
        function displayError(message) {
            const results = document.getElementById('search-results');
            results.innerHTML = `<div class="error-message">${message}</div>`;
        }

        // 데이터 저장
        function saveData() {
            localStorage.setItem('newsKeywords', JSON.stringify(keywords));
            localStorage.setItem('savedArticles', JSON.stringify(savedArticles));
            localStorage.setItem('fixedKeywords', JSON.stringify(fixedKeywords));
        }

        // =================
        // 정부 보도자료 시스템 (API 연동)
        // =================
        
        // API 설정
        const API_BASE_URL = window.location.hostname.includes('sandbox') || window.location.hostname.includes('localhost') 
            ? `${window.location.protocol}//${window.location.hostname.replace('8000-', '3002-')}`
            : '/api'; // 프로덕션에서는 상대 경로
        
        let currentAgency = 'all';
        let currentGovernmentPage = 1;
        const governmentArticlesPerPage = 6;
        let governmentNewsCache = null;
        
        // 기관 선택 함수
        function selectAgency(agency) {
            currentAgency = agency;
            currentGovernmentPage = 1;
            
            // 버튼 활성화 상태 업데이트
            document.querySelectorAll('.agency-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-agency') === agency) {
                    btn.classList.add('active');
                }
            });
            
            displayGovernmentNews();
        }
        
        // 정부 보도자료 새로고침 함수 (API 기반)
        async function refreshGovernmentNews() {
            const refreshBtn = document.getElementById('refreshBtn');
            const refreshIcon = document.getElementById('refreshIcon');
            
            try {
                // 새로고침 애니메이션 시작
                refreshIcon.classList.add('refreshing');
                refreshBtn.disabled = true;
                
                // 서버에서 새로운 스크래핑 요청
                const response = await fetch(`${API_BASE_URL}/api/news/scrape`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                
                const result = await response.json();
                
                if (result.success) {
                    // 캐시 무효화
                    governmentNewsCache = null;
                    
                    // 뉴스 다시 로드
                    await displayGovernmentNews();
                    updateLastUpdateTime();
                    
                    // 성공 메시지 표시
                    if (result.data.newItems > 0) {
                        alert(`새로고침 완료! ${result.data.newItems}개의 새로운 보도자료가 추가되었습니다.`);
                    } else {
                        alert('새로고침 완료! 새로운 보도자료가 없습니다.');
                    }
                } else {
                    throw new Error(result.error || '스크래핑에 실패했습니다.');
                }
                
            } catch (error) {
                console.error('새로고침 오류:', error);
                alert('새로고침 중 오류가 발생했습니다: ' + error.message);
            } finally {
                refreshIcon.classList.remove('refreshing');
                refreshBtn.disabled = false;
            }
        }
        

        
        // 정부 보도자료 표시 (API 기반)
        async function displayGovernmentNews() {
            const newsList = document.getElementById('government-news-list');
            
            try {
                // 로딩 표시
                newsList.innerHTML = `
                    <div class="welcome-message">
                        <h3>🔄 데이터를 불러오는 중...</h3>
                        <p>잠시만 기다려주세요.</p>
                    </div>
                `;
                
                // API에서 뉴스 데이터 가져오기
                const response = await fetch(`${API_BASE_URL}/api/news?agency=${currentAgency}&page=${currentGovernmentPage}&limit=${governmentArticlesPerPage}`);
                const result = await response.json();
                
                if (!result.success) {
                    throw new Error(result.error || '데이터를 불러올 수 없습니다.');
                }
                
                const newsData = result.data || [];
                const pagination = result.pagination || {};
                
                // 통계 업데이트
                await updateGovernmentStats();
                
                if (newsData.length === 0) {
                    newsList.innerHTML = `
                        <div class="welcome-message">
                            <h3>📋 보도자료 없음</h3>
                            <p>선택한 기관의 보도자료가 없습니다. 새로고침을 시도해주세요.</p>
                        </div>
                    `;
                    document.getElementById('government-pagination').style.display = 'none';
                    return;
                }
                
                // 뉴스 카드 생성 (가로형 레이아웃)
                const newsCards = newsData.map(item => `
                    <div class="government-news-card">
                        <div class="news-content">
                            <div class="news-header">
                                <span class="news-source">${item.agency}</span>
                                <span class="news-date">${item.date}</span>
                            </div>
                            <h4 class="news-title">${item.title}</h4>
                            <p class="news-summary">${item.summary}</p>
                            <div class="news-footer">
                                <a href="${item.url}" class="news-link" target="_blank" rel="noopener noreferrer">📖 원문 보기</a>
                                <button class="save-btn" onclick="saveGovernmentArticle(${item.id}, '${item.agencyCode}')" title="저장">
                                    💾
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
                
                newsList.innerHTML = `<div class="government-news-list">${newsCards}</div>`;
                
                // 페이지네이션 표시
                if (pagination.totalPages > 1) {
                    updateGovernmentPagination(pagination.totalPages, pagination.totalCount);
                    document.getElementById('government-pagination').style.display = 'block';
                } else {
                    document.getElementById('government-pagination').style.display = 'none';
                }
                
            } catch (error) {
                console.error('정부 뉴스 로딩 오류:', error);
                newsList.innerHTML = `
                    <div class="welcome-message">
                        <h3>❌ 오류가 발생했습니다</h3>
                        <p>${error.message}</p>
                        <button class="btn" onclick="displayGovernmentNews()">다시 시도</button>
                    </div>
                `;
            }
        }
        
        // 정부 보도자료 통계 업데이트 (API 기반)
        async function updateGovernmentStats() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/news/stats`);
                const result = await response.json();
                
                if (result.success) {
                    const stats = result.data;
                    document.getElementById('totalCount').textContent = stats.total || 0;
                    document.getElementById('todayCount').textContent = stats.today || 0;
                    document.getElementById('weekCount').textContent = stats.thisWeek || 0;
                } else {
                    throw new Error(result.error || '통계를 불러올 수 없습니다.');
                }
                
            } catch (error) {
                console.error('통계 업데이트 오류:', error);
                // 오류 시 기본값 표시
                document.getElementById('totalCount').textContent = '-';
                document.getElementById('todayCount').textContent = '-';
                document.getElementById('weekCount').textContent = '-';
            }
        }
        
        // 정부 보도자료 페이지네이션 업데이트
        function updateGovernmentPagination(totalPages, totalItems) {
            const startItem = (currentGovernmentPage - 1) * governmentArticlesPerPage + 1;
            const endItem = Math.min(currentGovernmentPage * governmentArticlesPerPage, totalItems);
            
            document.getElementById('government-page-info').textContent = `${startItem}-${endItem} of ${totalItems}`;
            
            const pageNumbers = document.getElementById('government-page-numbers');
            let pages = '';
            
            for (let i = 1; i <= Math.min(totalPages, 10); i++) {
                pages += `
                    <button class="pagination-btn ${i === currentGovernmentPage ? 'active' : ''}" 
                            onclick="goToGovernmentPage(${i})">${i}</button>
                `;
            }
            
            pageNumbers.innerHTML = pages;
            
            document.getElementById('government-prev-btn').disabled = currentGovernmentPage === 1;
            document.getElementById('government-next-btn').disabled = currentGovernmentPage === totalPages;
        }
        
        // 정부 보도자료 페이지 변경
        function changeGovernmentPage(direction) {
            const newPage = currentGovernmentPage + direction;
            if (newPage >= 1) {
                goToGovernmentPage(newPage);
            }
        }
        
        // 정부 보도자료 특정 페이지로 이동
        function goToGovernmentPage(page) {
            currentGovernmentPage = page;
            displayGovernmentNews();
            
            // 부드러운 스크롤
            document.getElementById('government-news-list').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }
        
        // 정부 보도자료 저장 (API 기반)
        async function saveGovernmentArticle(articleId, agencyCode) {
            try {
                // API에서 해당 기사 정보 가져오기
                const response = await fetch(`${API_BASE_URL}/api/news?agency=${agencyCode}&limit=100`);
                const result = await response.json();
                
                if (!result.success) {
                    throw new Error('기사 정보를 불러올 수 없습니다.');
                }
                
                const article = result.data.find(item => item.id === articleId);
                if (!article) {
                    alert('기사를 찾을 수 없습니다.');
                    return;
                }
                
                // savedArticles에 추가 (중복 확인)
                const existingIndex = savedArticles.findIndex(item => item.id === `gov_${articleId}`);
                if (existingIndex === -1) {
                    savedArticles.push({
                        id: `gov_${articleId}`,
                        title: article.title,
                        summary: article.summary,
                        url: article.url,
                        source: article.agency,
                        keyword: `[${article.agency}]`,
                        savedAt: new Date().getTime(),
                        timestamp: new Date(article.publishedAt).getTime()
                    });
                    saveData();
                    alert('보도자료가 저장되었습니다!');
                } else {
                    alert('이미 저장된 보도자료입니다.');
                }
                
            } catch (error) {
                console.error('저장 오류:', error);
                alert('저장 중 오류가 발생했습니다: ' + error.message);
            }
        }
        
        // 마지막 업데이트 시간 표시
        function updateLastUpdateTime() {
            const now = new Date();
            const timeString = `${now.getMonth() + 1}/${now.getDate()} ${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
            document.getElementById('lastUpdateTime').textContent = timeString;
        }

        // 정부 탭 초기화 (API 기반)
        async function initGovernmentTab() {
            updateLastUpdateTime();
            await displayGovernmentNews();
        }
    </script>
</body>
</html>